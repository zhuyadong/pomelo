"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("../../index");
class SessionRemote {
    constructor(app) {
        this.app = app;
    }
    bind(sid, uid, cb) {
        this.app.get("sessionService").bind(sid, uid, cb);
    }
    unbind(sid, uid, cb) {
        this.app.get("sessionService").unbind(sid, uid, cb);
    }
    push(sid, key, value, cb) {
        this.app.get("sessionService").import(sid, key, value, cb);
    }
    pushAll(sid, settings, cb) {
        this.app.get("sessionService").importAll(sid, settings, cb);
    }
    getBackendSessionBySid(sid, cb) {
        var session = this.app.get("sessionService").get(sid);
        if (!session) {
            index_1.utils.invokeCallback(cb);
            return;
        }
        index_1.utils.invokeCallback(cb, null, session.toFrontendSession().export());
    }
    getBackendSessionsByUid(uid, cb) {
        var sessions = this.app.get("sessionService").getByUid(uid);
        if (!sessions) {
            index_1.utils.invokeCallback(cb);
            return;
        }
        var res = [];
        for (var i = 0, l = sessions.length; i < l; i++) {
            res.push(sessions[i].toFrontendSession().export());
        }
        index_1.utils.invokeCallback(cb, null, res);
    }
    kickBySid(sid, reason, cb) {
        this.app.get("sessionService").kickBySessionId(sid, reason, cb);
    }
    kickByUid(uid, reason, cb) {
        this.app.get("sessionService").kick(uid, reason, cb);
    }
}
exports.SessionRemote = SessionRemote;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Vzc2lvblJlbW90ZVNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzZXNzaW9uUmVtb3RlU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUFpRDtBQUVqRDtJQUNFLFlBQXFCLEdBQWdCO1FBQWhCLFFBQUcsR0FBSCxHQUFHLENBQWE7SUFBRyxDQUFDO0lBRXpDLElBQUksQ0FBQyxHQUFXLEVBQUUsR0FBVyxFQUFFLEVBQVk7UUFDekMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQsTUFBTSxDQUFDLEdBQVcsRUFBRSxHQUFXLEVBQUUsRUFBWTtRQUMzQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ3RELENBQUM7SUFFRCxJQUFJLENBQUMsR0FBVyxFQUFFLEdBQVEsRUFBRSxLQUFVLEVBQUUsRUFBWTtRQUNsRCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQsT0FBTyxDQUFDLEdBQVcsRUFBRSxRQUFhLEVBQUUsRUFBWTtRQUM5QyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsUUFBUSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQzlELENBQUM7SUFFRCxzQkFBc0IsQ0FBQyxHQUFXLEVBQUUsRUFBWTtRQUM5QyxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0RCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDYixhQUFLLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQztRQUNULENBQUM7UUFDRCxhQUFLLENBQUMsY0FBYyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixFQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQsdUJBQXVCLENBQUMsR0FBVyxFQUFFLEVBQVk7UUFDL0MsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQ2QsYUFBSyxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUM7UUFDVCxDQUFDO1FBRUQsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO1FBQ2IsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNoRCxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7UUFDckQsQ0FBQztRQUNELGFBQUssQ0FBQyxjQUFjLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUN0QyxDQUFDO0lBRUQsU0FBUyxDQUFDLEdBQVcsRUFBRSxNQUFXLEVBQUUsRUFBWTtRQUM5QyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFFRCxTQUFTLENBQUMsR0FBVyxFQUFFLE1BQVcsRUFBRSxFQUFZO1FBQzlDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdkQsQ0FBQztDQUNGO0FBakRELHNDQWlEQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcGxpY2F0aW9uLCB1dGlscyB9IGZyb20gXCIuLi8uLi9pbmRleFwiO1xuXG5leHBvcnQgY2xhc3MgU2Vzc2lvblJlbW90ZSB7XG4gIGNvbnN0cnVjdG9yKHJlYWRvbmx5IGFwcDogQXBwbGljYXRpb24pIHt9XG5cbiAgYmluZChzaWQ6IG51bWJlciwgdWlkOiBzdHJpbmcsIGNiOiBGdW5jdGlvbikge1xuICAgIHRoaXMuYXBwLmdldChcInNlc3Npb25TZXJ2aWNlXCIpLmJpbmQoc2lkLCB1aWQsIGNiKTtcbiAgfVxuXG4gIHVuYmluZChzaWQ6IG51bWJlciwgdWlkOiBzdHJpbmcsIGNiOiBGdW5jdGlvbikge1xuICAgIHRoaXMuYXBwLmdldChcInNlc3Npb25TZXJ2aWNlXCIpLnVuYmluZChzaWQsIHVpZCwgY2IpO1xuICB9XG5cbiAgcHVzaChzaWQ6IG51bWJlciwga2V5OiBhbnksIHZhbHVlOiBhbnksIGNiOiBGdW5jdGlvbikge1xuICAgIHRoaXMuYXBwLmdldChcInNlc3Npb25TZXJ2aWNlXCIpLmltcG9ydChzaWQsIGtleSwgdmFsdWUsIGNiKTtcbiAgfVxuXG4gIHB1c2hBbGwoc2lkOiBudW1iZXIsIHNldHRpbmdzOiBhbnksIGNiOiBGdW5jdGlvbikge1xuICAgIHRoaXMuYXBwLmdldChcInNlc3Npb25TZXJ2aWNlXCIpLmltcG9ydEFsbChzaWQsIHNldHRpbmdzLCBjYik7XG4gIH1cblxuICBnZXRCYWNrZW5kU2Vzc2lvbkJ5U2lkKHNpZDogbnVtYmVyLCBjYjogRnVuY3Rpb24pIHtcbiAgICB2YXIgc2Vzc2lvbiA9IHRoaXMuYXBwLmdldChcInNlc3Npb25TZXJ2aWNlXCIpLmdldChzaWQpO1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgdXRpbHMuaW52b2tlQ2FsbGJhY2soY2IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB1dGlscy5pbnZva2VDYWxsYmFjayhjYiwgbnVsbCwgc2Vzc2lvbi50b0Zyb250ZW5kU2Vzc2lvbigpLmV4cG9ydCgpKTtcbiAgfVxuXG4gIGdldEJhY2tlbmRTZXNzaW9uc0J5VWlkKHVpZDogc3RyaW5nLCBjYjogRnVuY3Rpb24pIHtcbiAgICB2YXIgc2Vzc2lvbnMgPSB0aGlzLmFwcC5nZXQoXCJzZXNzaW9uU2VydmljZVwiKS5nZXRCeVVpZCh1aWQpO1xuICAgIGlmICghc2Vzc2lvbnMpIHtcbiAgICAgIHV0aWxzLmludm9rZUNhbGxiYWNrKGNiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZXNzaW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHJlcy5wdXNoKHNlc3Npb25zW2ldLnRvRnJvbnRlbmRTZXNzaW9uKCkuZXhwb3J0KCkpO1xuICAgIH1cbiAgICB1dGlscy5pbnZva2VDYWxsYmFjayhjYiwgbnVsbCwgcmVzKTtcbiAgfVxuXG4gIGtpY2tCeVNpZChzaWQ6IG51bWJlciwgcmVhc29uOiBhbnksIGNiOiBGdW5jdGlvbikge1xuICAgIHRoaXMuYXBwLmdldChcInNlc3Npb25TZXJ2aWNlXCIpLmtpY2tCeVNlc3Npb25JZChzaWQsIHJlYXNvbiwgY2IpO1xuICB9XG5cbiAga2lja0J5VWlkKHVpZDogc3RyaW5nLCByZWFzb246IGFueSwgY2I6IEZ1bmN0aW9uKSB7XG4gICAgdGhpcy5hcHAuZ2V0KFwic2Vzc2lvblNlcnZpY2VcIikua2ljayh1aWQsIHJlYXNvbiwgY2IpO1xuICB9XG59XG4iXX0=